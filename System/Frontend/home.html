<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Trang ch·ªß EHR</title>

  <!-- Auth Guard: n·∫øu ch∆∞a token ‚Üí b√°o v√† redirect -->
  <script>
    (function(){
      const token = localStorage.getItem('token');
      if (!token) {
        alert('B·∫°n ph·∫£i ƒëƒÉng nh·∫≠p ƒë·ªÉ truy c·∫≠p trang n√†y.');
        return window.location.href = 'login.html';
      }
      try {
        const payload = JSON.parse(atob(token.split('.')[1]));
        if (Date.now() >= payload.exp * 1000) {
          localStorage.clear();
          return window.location.href = 'login.html';
        }
      } catch {
        localStorage.clear();
        return window.location.href = 'login.html';
      }
    })();
  </script>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <!-- Navbar chung -->
  <nav class="navbar navbar-expand bg-light mb-4">
    <div class="container">
      <a class="navbar-brand" href="home.html">üè• EHR</a>
      <!-- C√°c n√∫t ƒëi·ªÅu h∆∞·ªõng kh√°c ·ªü ƒë√¢y sau -->
      <button id="logoutBtn" class="btn btn-outline-danger">ƒêƒÉng xu·∫•t</button>
    </div>
  </nav>

  <div class="container">
    <h1>Ch√†o m·ª´ng b·∫°n ƒë·∫øn Trang ch·ªß EHR</h1>
    <p>H√£y ch·ªçn ch·ª©c nƒÉng:</p>
    <ul>
      <li><a href="upload.html">Upload & M√£ h√≥a</a></li>
      <li><a href="keygen.html">Sinh SK</a></li>
      <li><a href="download.html">Download & Gi·∫£i m√£</a></li>
    </ul>
  </div>

  <script>
    // Logout
    document.getElementById('logoutBtn').addEventListener('click', () => {
      localStorage.clear();
      window.location.href = 'login.html';
    });
  </script>
</body>
</html>
